@model Eventure.Models.Event

@{
    ViewData["Title"] = "Delete Event";
}

<link rel="stylesheet" href="~/css/events/Delete.css" />

<div class="delete-container">
    <div class="warning-card">

        <h1 class="delete-title">Usuń Wydarzenie</h1>
        <div class="accent-line"></div>
        <p class="warning-message">Czy na pewno chcesz usunąć to wydarzenie?</p>

        <div class="event-details">
            <div class="detail-row">
                <span class="detail-label">Tytuł</span>
                <span class="detail-value">@Model.Title</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Data rozpoczęcia</span>
                <span class="detail-value">@Model.StartDateTime.ToString("f")</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Data zakończenia</span>
                <span class="detail-value">@Model.EndDateTime.ToString("f")</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Lokalizacja</span>
                <span class="detail-value">@(Model.Location ?? "Online")</span>
            </div>
            @if (Model.Participants != null && Model.Participants.Any())
            {
                <div class="detail-row">
                    <span class="detail-label">Liczba uczestników</span>
                    <span class="detail-value">@Model.Participants.Count()</span>
                </div>
            }
        </div>

        <div class="consequences-list">
            <div class="consequences-title">
                <i class="bi bi-info-circle"></i>
                Konsekwencje usunięcia wydarzenia:
            </div>
            <ul>
                <li>Wydarzenie zostanie trwale usunięte z systemu</li>
                <li>Wszyscy uczestnicy stracą dostęp do wydarzenia</li>
                <li>Historia komentarzy i dyskusji zostanie utracona</li>
                <li>Tej operacji nie można cofnąć</li>
            </ul>
        </div>

        <div class="confirmation-checkbox">
            <input type="checkbox" id="confirmDelete" />
            <label for="confirmDelete">
                Rozumiem konsekwencje i chcę usunąć to wydarzenie
            </label>
        </div>

        <form asp-action="Delete" asp-route-id="@Model.Id" method="post" id="deleteForm">
            <div class="form-actions">
                <button type="submit" class="btn btn-danger" id="deleteButton" disabled>
                    <i class="bi bi-trash"></i>
                    Usuń Wydarzenie
                </button>
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i>
                    Anuluj
                </a>
            </div>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkbox = document.getElementById('confirmDelete');
        const deleteButton = document.getElementById('deleteButton');
        const deleteForm = document.getElementById('deleteForm');

        checkbox.addEventListener('change', function() {
            deleteButton.disabled = !this.checked;
            if (this.checked) {
                deleteButton.classList.add('enabled');
            } else {
                deleteButton.classList.remove('enabled');
            }
        });

        deleteForm.addEventListener('submit', function(e) {
            if (!checkbox.checked) {
                e.preventDefault();
                return false;
            }
        });
    });
</script>