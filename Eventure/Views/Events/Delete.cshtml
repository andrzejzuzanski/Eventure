@model Eventure.Models.Event

@{
    ViewData["Title"] = "Delete Event";
}

<link rel="stylesheet" href="~/css/events/Delete.css" />

<div class="delete-container">
    <div class="warning-card">

        <h1 class="delete-title">Delete Event</h1>
        <div class="accent-line"></div>
        <p class="warning-message">Are you sure you want to delete this event?</p>

        <div class="event-details">
            <div class="detail-row">
                <span class="detail-label">Title</span>
                <span class="detail-value">@Model.Title</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Start date</span>
                <span class="detail-value">@Model.StartDateTime.ToString("f")</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">End date</span>
                <span class="detail-value">@Model.EndDateTime.ToString("f")</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Location</span>
                <span class="detail-value">@(Model.Location ?? "Online")</span>
            </div>
            @if (Model.Participants != null && Model.Participants.Any())
            {
                <div class="detail-row">
                    <span class="detail-label">Number of participants</span>
                    <span class="detail-value">@Model.Participants.Count()</span>
                </div>
            }
        </div>

        <div class="consequences-list">
            <div class="consequences-title">
                <i class="bi bi-info-circle"></i>
                Consequences of deleting an event:
            </div>
            <ul>
                <li>The event will be permanently deleted from the system.</li>
                <li>All participants will lose access to the event.</li>
                <li>The history of comments and discussions will be lost.</li>
                <li>This operation cannot be undone.</li>
            </ul>
        </div>

        <div class="confirmation-checkbox">
            <input type="checkbox" id="confirmDelete" />
            <label for="confirmDelete">
                I understand the consequences and want to delete this event.
            </label>
        </div>

        <form asp-action="Delete" asp-route-id="@Model.Id" method="post" id="deleteForm">
            <div class="form-actions">
                <button type="submit" class="btn btn-danger" id="deleteButton" disabled>
                    <i class="bi bi-trash"></i>
                    Delete Event
                </button>
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i>
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkbox = document.getElementById('confirmDelete');
        const deleteButton = document.getElementById('deleteButton');
        const deleteForm = document.getElementById('deleteForm');

        checkbox.addEventListener('change', function() {
            deleteButton.disabled = !this.checked;
            if (this.checked) {
                deleteButton.classList.add('enabled');
            } else {
                deleteButton.classList.remove('enabled');
            }
        });

        deleteForm.addEventListener('submit', function(e) {
            if (!checkbox.checked) {
                e.preventDefault();
                return false;
            }
        });
    });
</script>